Indispensable UNIX utilities:
http://www.volkerschatz.com/unix/uutils.html

Уязвимости убунты:
    настроить проводник Ubuntu (nautilus)
        Права - Параметры
        Просмотр в виде списка
        Носители - отключить автозапуск и просмотр носителей

    в /etc/udev!!! /lib/udev/rules.d/50-udev-default.rules -- MODE="0660"

sudoedit /etc/locale.conf
    LANG="en_US.UTF-8"

uninstall geoclue

fix VPN de-anonymization:
(see http://habrahabr.ru/post/273523/)
# sysctl net.ipv4.conf.all.rp_filter=1
# sysctl net.ipv4.conf.default.rp_filter=1
# sysctl net.ipv4.conf.tun0.rp_filter=1
# sysctl net.ipv4.conf.wlp3s0.rp_filter=1
# ip6tables -t raw -A PREROUTING -m rpfilter --invert -j DROP

Xscreensaver twang can hang, disabling whole screen.
How to repair without rebooting and restarting X server:
You should have tmux or other way to run commands in original
X server.
$ DISPLAY=:0.0 xscreensaver
From another tmux tab:
$ DISPLAY=:0.0 xscreensaver-command --lock

Automatic security updates:
# apt-get install unattended-upgrades apt-listchanges
# dpkg-reconfigure -plow unattended-upgrades

~/.ssh/config:
ForwardX11Trusted no

xvfb: fake X-server to run GUI apps without real X-server
xvfb-run --server-args="-noreset +extension RANDR" command

Resize window in xfce:
$ xdotool windowsize $(xdotool search "Tor Browser"|tail -1) 1000 660

https://pdd.yandex.ru/ Fix de-anonymization (master email leak):
Domain -> Edit DNS -> Edit SOA entry -> change xxx.yandex.ru

Allow only standard Tor port:
ReachableAddresses *:9001, reject *:*

Layout indicator for xfce:
xfce4-xkb-plugin

Autostart application in XFCE:
Settings -> Session and startp -> Application Autostart

/etc/default/keyboard
    XKBMODEL="pc105"
    XKBLAYOUT="us,ru"
    XKBVARIANT=""
    XKBOPTIONS="grp:rctrl_rshift_toggle"
    BACKSPACE="guess"
# dpkg-reconfigure console-data
# dpkg-reconfigure keyboard-configuration
# service keyboard-setup restart

IDS. Intrusion detection system
===============================
rkhunter --check
chkrootkit
debsums check the MD5 sums of installed Debian packages
    CentoOS: rpm -Va
aide
tripwire
logwatch

Как устаносить программы по умолчанию и убрать лишние из меню "Открыть с помощью"
    Свойства файла - вкладка "Открывать с помощью"

перенос настроек с одного компьютера на другой
 http://otvety.google.ru/otvety/thread?tid=7b7e0aa5a63eb594
  dpkg --get-selections >packages-list на компьютере, с которого переносите.
  Затем полученный файл тащите на новую машину со свежеустановленной убунтой и
  dpkg --set-selections <packages-list
  apt-get dselect-upgrade

After installation:
 * Ctrl + Alt + T => gnome-terminal --working-directory=~
 * terminal:
  * do not show menubar by default in new terminals
  * do not show scrollbar
 * power management:
  * do not spin off
  * laptop lid is closed => Blackscreen
 * mouse - touchpad
  * enable mouse clicks with touchpad
  * two-finger scrolling
 * keyboard - layouts:
  * add Russian
  * switch language: Shift + Ctrl

Touchpad tap-to-click:
$ synclient TapButton1=1 LBCornerButton=2 RBCornerButton=3 MaxTapTime=140 SingleTapTimeout=140 MaxDoubleTapTime=140

cron-apt -- automatic security updates

Google encrypted chrome plugin:
https://encrypted.google.com/search?{google:RLZ}{google:acceptedSuggestion}{google:originalQueryForSuggestion}sourceid=chrome&ie={inputEncoding}&q=%s

etckeeper

dpkg-reconfigure python-poker-network

анализ безопасности
    debsecan
    tiger

http://sovety.blogspot.com/2008/01/aptitude.html
переустановить установленные пакеты, зависящие от питона, но не shedskin и не django
sudo aptitude -f reinstall '~i~Dpython!~nshedskin'

aptitude
    http://algebraicthunk.net/~dburrows/projects/aptitude/doc/en/ch02s03s05.html
    '~D^python$' -- зависящие от питона       apt-cache rdepends python
    '~R^python$' -- зависимости питона        apt-cache depends python
    ~M           -- automatically installed
    keep-all -- Cancels all scheduled actions on all packages
    forget-new -- Forgets all internal information about what packages are “new”
    (un)markauto -- Mark packages as automatically installed or manually installed

dpkg --ignore-depends=libgcc1 -i gcc-4.3.deb

$ dpkg -s lsof
Package: lsof
Status: install ok installed
Priority: standard
Section: utils
Installed-Size: 420
Maintainer: Norbert Tretkowski <nobse@debian.org>
Architecture: amd64
Version: 4.86+dfsg-1
Depends: libc6 (>= 2.11), libperl4-corelibs-perl | perl (<< 5.12.3-7)
Description: Utility to list open files
 Lsof is a Unix-specific diagnostic tool.  Its name stands
 for LiSt Open Files, and it does just that.  It lists
 information about any files that are open, by processes
 currently running on the system.
Homepage: http://people.freebsd.org/~abe/

To install .deb package and all its packages:
# dpkg -i ...
# apt-get -f install

perror -- отпределяет название ошибки по номеру


Сменить MAC-адрес: macchanger
или
  ifconfig eth0 down
  ifconfig eth0 hw ether 00:19:7e:53:8c:a3
  ifconfig eth0 up
    sudo ifconfig wlan0 down; sudo ifconfig wlan0 hw ether 00:21:19:4d:a0:ba; sudo ifconfig wlan0 up

network-admin - тут можно поменять хост компьютера в локальной сети

How to find IP address of a machine if I know their MAC Address:
$ arp -na

способ убить процессы по имени:
  ps -A | grep app.wt | awk '{print $1}' | xargs kill

обновить программы (менеджер обновлений):
  /usr/bin/update-manager

создать линк
ln -s /cygdrive/c /c

aircrack
sing -- ip spoofing

поменять юзеру шел shell:
    usermod -s /sbin/nologin tom

CheckInstall - контроль программ, установленных из исходников, создает пакет .deb
easy-deb - создает пакет .deb из проекта python

apply patch, build and install
apt-build --patch mono.patch install sni-qt
    http://habrahabr.ru/post/181934/

режимы процессора:
    http://habrahabr.ru/blogs/linux/80914/#habracut
    переключить режим процессора:
         sudo cpufreq-set --min 800MHz --governor ondemand -c 0
         sudo cpufreq-set --min 800MHz --governor ondemand -c 1
    узнать:
        cpufreq-info
        cat /proc/acpi/processor/CPU0/limit
        watch cat /proc/acpi/thermal_zone/*/temperature

работа с портами:
    lsof - список открытых файлов
    lsof -tcp - список открытых портов
    netstat - статистика соединений

запустить простой файловый сервер:
    python -m SimpleHTTPServer 8000

nginx + php:
http://till.klampaeckel.de/blog/archives/51-Ubuntu-nginx+php-cgi-on-a-socket.html

Filezilla
GuildFTPd

poedit

отключить модуль ядра kvm_intel (до перезагрузки):
    rmmod kvm_intel

редактировать обработку различных uri:
    gconf-editor
    /desktop/gnome/uri-handlers

tar -c --exclude=*.ent GeometricalCore_v16 | gzip > 16.tar

find -iname '*.mp3' > 1.m3u

Add -prune to `find` if you rename or remove found directories.
Example: https://github.com/mxe/mxe/pull/1390
Option -prune prevents `find` from entering renamed/removed dir.
http://unix.stackexchange.com/a/115869

выполнить скрипт и открыть питон в интерактивном режиме
    python -i file.py

cp -a
rsync -a
rsync -e ssh --bwlimit=350 --progress -Lzuogthvrp --compress-level=9

sqliteman - редактор для sqlite БД

.po to .mo
msgfmt [option] filename.po ...
http://www.gnu.org/software/gettext/manual/gettext.html#msgfmt-Invocation

django migrations
http://code.google.com/p/django-evolution/

обновить linux:
sudo apt-get -y upgrade
apt-get -y update
apt-get -y upgrade или dist-upgrade
sudo do-release-upgrade
http://www.ubuntu.com/desktop/get-ubuntu/upgrade
http://linuxway.ru/shag-za-shagom/kak-obnovit-ubuntu/

kFourInLine - кваттрополи 4 крестики-нолики

Скачать сайт или раздел сайта
wget -r -k -p -np -e robots=off -E --no-check-certificate http://kodomo.fbb.msu.ru/wiki/Main/Python/
-r              рекурсия
-k              переправить пути для локального просмотра
-p              загрузить все изображения и проч., необходимые для отображения HTML-страницы.
-np             не подниматься в родительский каталог
-e robots=off   забить на robots.txt и nofollow (чит)
-nc, --no-clobber  пропускать загрузки, которые приведут к загрузке уже существующих файлов.
-t 7 -w 5 --waitretry=14 --random-wait   подделка ожидания
--no-check-certificate  не проверять правильность сертификата для https
-E - решает проблему с индексными файлами
-U - агент (браузер)
    Mozilla/5.0 (X11; U; Linux i686; ru; rv:1.9.2.3) Gecko/20100423 Ubuntu/10.04 (lucid) Firefox/3.6.3

computertemp. + добавить на панель гнома
hddtemp
powertop - контроль энергопотребления и подстройка для снжения температуры

ограничить процент ЦП на процесс:
    cpulimit -e apache2 -l 30

FS:
 * xfs for large files (avi)
 * ext3/4/reiser -- a lot of small files
 * ext3 is online resizable (good for /)
Conclusion : To use the maximum of your partition capacity, choose ReiserFS, JFS or XFS.
Conclusion : For quick FS creation and mounting/unmounting, choose JFS or XFS.
Conclusion : For quick operations on large files, choose JFS or XFS. If you need to minimize CPU usage, prefer JFS.
Conclusion : For quick operations on large file tree, choose Ext3 or XFS
Conclusion : Results suggest that, for these tasks, filesystems can be regrouped as (a) quick and
    more CPU-intensive (ReiserFS and XFS) or (b) slower but less CPU-intensive (ext3 and JFS). XFS
    appears as a good compromise, with relatively quick results, moderate usage of CPU and acceptable
    rate of page faults.

сделать geany стандартным текстовым редактором
    в ~/.local/share/applications/defaults.list
    добавляем строки
        [Default Applications]
        text/*=geany.desktop

отключить ведение истории недавних документов:
    $ rm ~/.recently-used.xbel
    $ touch ~/.recently-used.xbel
    $ sudo chattr +i ~/.recently-used.xbel

    После этих команд нужно очистить список в меню. После этого этот пункт станет недоступным.
    Если хотите вернуть эту функцию, то наберите это в терминале:

    $ sudo chattr -i ~/.recently-used.xbel

xkill - убить оконное приложение
    можно на панель апплет "Принудительное завершение" добавить

hamachi for linux
http://dl.getdropbox.com/u/728854/hamachi-0.9.9.9-20_0.9.9.9-1_i386.deb
hamachi-gui    hamachi-gui_0.9.5-0_i386-gutsy.deb

alsamixer - звуковой микшер из-под командной строки
нужно нажимать на М под "бегунками"

localepurge -- удалить ненужные локализации из системы

Anomos - анонимный bittorent

cryptkeeper - шифрованные папки

HEX - Шестнадцатиричный редактор

Запись звонков skype
http://itshaman.ru/articles/161/zapis-skype-razgovorov-v-linux
 http://atdot.ch/scr/
http://porpoisehead.net/hi/?q=node/23

доустановить требуемые зависимости
apt-get -f install

gedit
написание плагинов: http://live.gnome.org/Gedit/PythonPluginHowTo
установка плагинов: http://habrahabr.ru/blogs/linux/50267/
нормальный double-click: http://code.google.com/p/gedit-click-config/

настройка bash
http://system-administrators.info/?p=1248

Bash enable debug, crash on error in any command or pipe:
$ set -x  # print all commands
$ set -e  # exit if a subcommand exits with non-zero
$ set -u  # exit if unset variable is used
$ set -f  # Disable pathname expansion

Подсказки при запуске неустановленных программ
auto-apt

mesg off
запретить принимать write

NTP - синхронизация времени
установить приложение NTP
Система - Администрирование - Дата и время - Конфигурация - Синхронизовать...
apt-get install ntp

Перерывы в работе. Бережем глаза
Система- Параметры – Клавиатура - Перерыв в работе

русские man
sudo apt-get install manpages-ru

Поддержка 3D шахмат
sudo apt-get install python-opengl python-gtkglext1 libgtkglext1
http://pyopengl.sourceforge.net/documentation/installation.html

Запустить команду Att+F2 (в windows: win + R)

темы в Gnome: http://art.gnome.org/themes
тема W2k
тема для кнопок: Wasp или Simple

узнать занимаемый размер
  du -sk /usr/*      размер подкаталогов в /usr
  du -sh
  du -c
  du -shx | sort -h | tail

таблица разделов / разбиений:
  df -h
  df -hTP

Настройка sudo в debian
/etc/sudoers
user ALL=(ALL) ALL

Preload: подгрузка памяти
http://meandubuntu.ru/2009/11/preload-%D0%B8%D0%BB%D0%B8-%D1%83%D1%81%D0%BF%D0%BE%D1%80%D1%8F%D0%B5%D0%BC-%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC-%D0%B2-ubuntu-linux/
sudo aptitude install preload

Куб рабочего стола: CompizConfig
лучше выбрать модуль Expo и рисование огнем

tmpfs /tmp tmpfs defaults 0 0
tmpfs /tmp tmpfs defaults,size=2g 0 0

Ограничение использования памяти, количества процессов и т.д.:
    /etc/security/limits.conf
add "session required pam_limits.so" to /etc/pam.d/common-session*

Limit memory usage for a single Linux process:
$ ulimit -Sv 500000     # Set ~500 mb limit

XEN - виртуальная машина без потерь

убить процесс
kill -s 9 <PID>
killall python

Vidalia
TorK

upx

GtkHash

Golly - Life

VirtualBox общая папка
mount -t vboxsf <FolderName> /home/test/obmen
Пример: sudo mount -t vboxsf Portable /home/boris/Portable/
Пример: sudo mount -t vboxsf DATA /D
/etc/fstab:
<name_of_share>   /path/to/mountpoint   vboxsf   <options>  0   0

Автозапуск программ при старте системы:
    Система - Параметры - Запускаемые приложения

sudo apt-get install rar p7zip-full

sudo dpkg --configure -a

Установка dkms для установки virtualbox:
sudo dpkg --configure -a
sudo aptitude install dkms

Вызвать Системный монитор по нажатии Ctrl-Alt_Del:
    Система -> параметры -> Комбинации клавиш клавиатуры
    Там жмешь клавишу добавить, вводишь любое имя,
    а в графе команда пишешь "gnome-system-monitor",
    применить, в самом конце списка находишь свою команду
    и назначаешь любое сочетание клавиш, какое нужно.

Запустить/остановить кабельный инет: cable-start / cable-stop
Запустить DHCP: dhclient ath0, где ath0 - имя интерфейса

Заставка:
Система - Параметры - "Хранитель Экрана"

Переименовать выделенный файл: F2

wine
PlayOnLinux

binfmt-support allows to run EXE files transparently:
$ ./1.exe
    instead of
$ wine 1.exe

Geany

xampp
http://vb.in-source.ru/
sudo tasksel install lamp-server
http://rotuka.com/2008/10/lamp-ubuntu-apache-mysql-php/

> Ctrl-shift. переключение раскладки
Дефолтные настройки для иксов теперь здесь:
/etc/default/console-setup
ищите параметры XKB*****

eeePC - wifi
http://linuxon1001p.blogspot.com/2010/03/fixing-wireless.html
    auto modprobe startup
    The file is /etc/modules.
    You don't need to put in "sudo modprobe" before them

# gpg --keyserver keyserver.ubuntu.com --recv-keys 07DC563D1F41B907
# gpg --armor --export 1F41B907 | apt-key add -

sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com КЛЮЧ

aptitude upgrade xxx
    The following packages have been kept back:
        xxx
apt-get install xxx
    The following extra packages will be installed:
        xxx

Монтируем:
    sudo mount -o loop /home/brun/iso.iso /media/cdrom0/
Размонтируем:
    sudo umount /media/cdrom0/
автоматически пишем в /etc/fstab:
    /dir1/dir2/file.iso /mnt/iso iso9660 ro,loop,auto,user 0 0

sudo users-admin

iwlist wlan scan
iwconfig $wlan mode Ad-Hoc essid netsukuku

сервер
    auto usb-wifi
    iface usb-wifi inet static
            address 10.255.255.1
            netmask 255.255.255.240
            wireless-essid MyHome
            wireless-mode ad-hoc
            wireless-key open [1] 1234567890
клиент:
    auto usb-wifi
    iface usb-wifi inet dhcp
            wireless-essid MyHome
            wireless-mode ad-hoc
            wireless-key open [1] 1234567890

File associations:
    1.) /usr/share/applications/defaults.list
    -- This method is perhaps one of the most important. Following this comes..

    2.) /usr/share/applications/mimeinfo.cache
    -- This is the cache of the current mime types.
    Updating the mime database doesn't work to well so of course you have to manually edit this as well.

    3.) ~/.local/share/applications/
    -- The dreaded "Open With"

    4.) ~/.gnome/share/apps/
    -- Same as the above

Добавить индикатор раскладки клавиатуры:
правый щелчок мышью по верхней панели - добавить панель

Установка пакетов
sudo apt-get install openssl-devel

Менеджер пакетов: dpkg
дружественный: dselect

aptitude -F '%I %p %V %v' -O installsize search ~i

Сетевые протоколы
Прикладной уровень  HTTP, SMTP, SSH, SNMP, FTP, NNTP, NTP, LDAP, ...
Сеансовый уровень   TLS, SSL, RPC, WSP...
Транспортный уровень    TCP, UDP, SCTP, ICMP, OSPF, RSVP, VRRP, RTP, DCCP ...
Сетевой уровень IPv4, IPv6, ARP, RARP, MPLS, IPX ...
Канальный уровень   Ethernet, 802.11, xDSL, Fibre Channel, FDDI, ATM, ISDN ...

passwords:
gpw
pwqgen
pwgen

#!/bin/bash
read -p "Username: " uname
stty -echo
read -p "Password: " passw; echo
stty echo

learn password:
stty -echo; read -p "P: " ppp; stty echo; echo $ppp|md5sum

shred -- fully delete file

sudo ntpdate europe.pool.ntp.org
tlsdate --dont-set-clock --showtime

traceroute for specific TCP port:
$ tcptraceroute host port

update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.5 20

открытые порты: netstat -lpn

pm-suspend

valgrind --callgrind to see what is taking CPU
strace - trace system calls
ltrace - trace library calls
perf top -- Performance analysis tools for Linux
perf stat command -- gather performance counter statistics

За это отвечает параметр swapinnes, чем он больше,
тем чаще система пишет в своп,
по дефолту - 60, пределы изменения - от 0 до 100.
Не помню правда, что это за попугаи, но не критично думаю =)
можно изменить так
echo 10 > /proc/sys/vm/swappiness
или прописать в sysctl.conf
vm.swappiness=10

swap in file:
# dd if=/dev/zero of=/swapfile bs=1024 count=1048576
# mkswap -f /swapfile
# swapon /swapfile
/etc/fstab:
/swapfile   none   swap   sw 0 0
https://www.chunkhost.com/help/swap

gdb: catch throw
gdb non-interactive mode: gdb -batch -x script.gdb --args ...

nginx
    server_name_in_redirect off;

A Default "Catch All" Server Block
    http://wiki.nginx.org/ServerBlockExample

Linux:   for fname in *.jpg; do mogrify -resize 640 $fname; done
Windows: for %fname in (*.jpg) do mogrify -resize 640 %fname;

Удалить все desktop.ini в вложенных папках
find -name '*desktop.ini' -exec rm "{}" \;

Удалить дупликаты
fdupes -r . -Nd

vmstat 1

df -hTP

vim
    :%!fold -s -w 80
    set ve=all
    :e ++enc=cp1251

find . -type d -exec chmod 755 {} \;

add-apt-repository ppa:dtl131/ppa
ppa-purge ppa:dtl131/ppa

cp -a -- preserve all (for filesystem move)

One fs mode:
 * tar --one-file-system
 * du -x        du --one-file-system
 * cp -x        cp --one-file-system
 * find -xdev   find -mount

stty -echo; read -p "enter: " p; echo $p | md5sum; stty echo;

echo Привет |mail -s "test mail sent to external" bnagaev@gmail.com

Setup SMTP daemon to use Gmail on Debian:
Postfix: http://bit.ly/OcGopv (asynchronous)
Exim4:   http://wiki.debian.org/GmailAndExim4 (synchronous)

Postgres:
http://www.cyberciti.biz/faq/howto-add-postgresql-user-account/

grep reread -A 5 -B 5 -r . -n --color=always|less -R
 * -i ignore case
 * -v inverted
 * -A, -B after, before
 * \< \> inside pattern: word boundaries

Bit Twiddling Hacks
http://graphics.stanford.edu/~seander/bithacks.html

If you do not choose an inheritance type, C++ defaults to private inheritance

dpkg -L aptitude -- list of files of aptitude package
dpkg-query -S /usr/bin/bash -- search for package containing the file
dpkg-deb -I 123.deb -- get info about a binary package
dpkg-deb -c 123.deb -- get list of file to be installed from this package
ar vx mypackage.deb -- deb to tar

syntek webcam
http://doc.ubuntu-fr.org/syntek

mplayer:
    subtitles: -sub sailormoon56.srt
    subtitles: -subcp cp1251
    add to ~/.mplayer/config: (not in gnome-mplayer section only)
        vf=screenshot
    then press s while watching

    -ss 17:10
    -alang rus -slang rus

    mplayer -nocache -framedrop -vfm ffmpeg -lavdopts lowres=1:fast:skiploopfilter=all -nobps -ni -forceidx -mc 0
    choose audio device: -ao alsa:device=hw=1.0
    enhance volume: -af volume=10.1:0
    framebuffer: -vo fbdev2 -zoom -xy 1024

    mencoder tv:// -tv device=/dev/video0 -nosound -ovc lavc -o foo.avi

vlc external file:
$ vlc video.mkv --input-slave audio.mka

Merge audio and video mkv:
$ mkvmerge -D audio.avi -A video.avi -o mymovie.mkv

How To Document and Organize Your C++ Code
 * http://www.edparrish.com/common/cppdoc.html
 * vars and funcs: lower case letters and underbars ('_') as separators
 * names of private data members of classes should end with '_'
Not to forget:
 * use boost::polymorphic_downcast
 * boost static assert

Move root mount point to LVM (luks):
http://www.sysresccd.org/Sysresccd-LVM-EN-Moving-the-linux-rootfs-to-an-LVM-volume
http://superuser.com/questions/304115/ubuntu-moving-root-folder-to-a-new-lvm-partition
 * copy data... cp -ra
 * mount lvm root to /tmp/new
  mount --bind /dev/ /tmp/new/dev
  mount -t proc none /tmp/new/proc
  mount -t sysfs none /tmp/new/sys
  mount -t devpts none /tmp/new/dev/pts
 * chroot /tmp/netmp/new
 * /etc/fstab
 * [ /etc/crypttab ]
 * /boot/grub/grub.cfg: see "root=" and set root=/dev/mapper/group-root
 * update-initramfs -u
 * update-grub
 * grub-install /dev/sda
 * /etc/initramfs-tools/conf.d/resume: swap location for resume from hibernate
   /dev/mapper/<vg>/<lv>    !!! not UUID=... or /dev/<vg>/<lv>

Change partition type (see sfdisk(8))
 % sfdisk --print-id /dev/hdb 5
 6
 % sfdisk --change-id /dev/hdb 5 83
 OK

haskell:
 * http://www.haskell.org/haskellwiki/Learn_Haskell_in_10_minutes
 * http://learnyouahaskell.com/

Change grub colors and background:
 * edit /etc/grub.d/05_debian_theme
 * comment /usr/share/desktop-base/grub_background.sh
 * specify variables from /usr/share/desktop-base/grub_background.sh
 * update-grub
wheezy:
 * edit /etc/default/grub
 * GRUB_BACKGROUND="/path/file"
 * if /usr is encrypted, copy /usr/share/grub/unicode.pf2 to /boot/grub
    https://lists.debian.org/debian-user/2012/12/msg00671.html
 * update-grub

grub: change default menu item selected
* /etc/default/grub
* GRUB_DEFAULT=<0-based number>
* update-grub

Mouse -> Touchpad -> Disable mouse when typing

aptitude install vim tmux screen bash-completion nginx etckeeper sudo mercurial git

How to install testing packages on debian stable with apt-get
    -create or modify the /etc/apt/apt.conf file and make it contain the following line:
        APT::Default-Release "stable";
    -modify the /etc/apt/sources.list file: copy all the lines containing stable, and replace the stable by testing.
    -run apt-get update to update the list of installable packages.
    -if you want to install the package foo that is present in the testing sources, use the following command:
        apt-get -t testing install foo

apt-get install `apt-show-versions -u -b | grep unstable`

apt-cache policy <package>
    Show installed, candidate etc. verions of <package>

To downgrade all packages to stable:
 * /etc/apt/preferences
    Package: *
    Pin: release a=stable
    Pin-Priority: 2000

    Package: *
    Pin: release a=testing
    Pin-Priority: 60

    Package: *
    Pin: release a=unstable
    Pin-Priority: 50
 * rm /etc/apt/apt.conf
 * apt-get update
 * apt-get dist-upgrade

ATI non-free:
    # aptitude -r install linux-headers-2.6-$(uname -r|sed 's,[^-]*-[^-]*-,,') fglrx-control fglrx-driver
    # aticonfig --initial
    see /etc/X11/xorg.conf

open another xserver:
$ startx -- :1 &

Copy apt cache to another computer:
 * create dvd iso with aptoncd
 * copy is file
 * mount it
 * add it to apt sources (e.g. using software sorces)
    deb cdrom:[APTonCD for   - i386 (2011-10-11 23:23) DVD1]/ /
 * comment all other entries in /etc/apt/sources.list
 * dpkg --get-selections | scp | dpkg --set-selections
 * apt-get dselect-upgrade

CPU:
$ lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                4
...

GPU:
 * glxinfo | grep renderer
 * cat /var/log/XFree86.0.log | grep "GPU detected"
 * lspci -v | grep VGA
 * cat /proc/pci | grep VGA

Copy NetworkManager settings, connections and wireless passwords:
 * ~/.gconf/system/networking
 * ~/.gnome2/keyrings

NetworkManager nmcli commands:
http://linux-commands-examples.com/nmcli

Have you ever wanted to share an internet connection in Ubuntu?
 * Install dnsmasq on your computer. (On Ubuntu, you will want to install the dnsmasq-base package.)
 * Make sure your WAN connection is all configured (e.g. with DHCP or a static address) and working.
 * For your LAN interface (which might be a second network card or a wireless card),
   select “Shared to other computers” in the IPv4 Settings tab.
(This article is based on http://www.netdip.com/ubuntu-internet-connection-sharing-9f/
and appears here under a Creative Commons Attribution-Share Alike 3.0 License)

pidgin gtalk:
http://blog.paulbetts.org/index.php/2007/07/13/connection-errors-in-pidgin-with-gtalk/
Basically, go to the advanced tab and set
 * Force old (port 5223) SSL
 * Connect port: 443
 * Connect server: talk.google.com
 * Use global proxy

genisoimage -o my_image.iso my_directory
    -U Allow Untranslated filenames

Encrypted (LVM) volumes:
 * cryptsetup luksFormat /dev/group/x
 * cryptsetup luksOpen /dev/group/x y  ==> device /dev/mapper/y should be created
 * /etc/crypttab:
     y /dev/group/x none luks
     cswap /dev/sda6 /dev/urandom swap
     (example from `man crypttab')
 * /etc/fstab
 * reboot or mount
 * cryptsetup luksAddKey <device>  --   add  a  new  key file/passphrase.
 * cryptsetup luksRemoveKey <device>  --   remove supplied key or key file
Passdev (encrypted partition with keyfiles):
 * create lv (keysbase)
 * luks over keysbase (keys)
 * ext3 keys
 * dd if=/dev/urandom of=<keys>/home bs=1K count=4
 * /etc/crypttab:
   home /dev/vg/homebase /dev/mapper/keys:home luks,keyscript=/lib/cryptsetup/scripts/passdev
 * update-initramfs -u

Backup MBR with dd command:
 * backup: sfdisk -d /dev/sdX > backup-sdX.sf
 * restore: sfdisk /dev/sdX < backup-sdX.sf

sudo update-flashplugin-nonfree --install

Install pulseaudio (debian):
http://forums.debian.net/viewtopic.php?t=12497
 * aptitude install pulseaudio libao4 paprefs \
    libpulse-mainloop-glib0 pulseaudio-module-jack pavucontrol \
    pulseaudio-module-hal pulseaudio-module-x11 \
    gstreamer0.10-pulseaudio pulseaudio-utils \
    libasound2-plugins paman pulseaudio-module-gconf \
    libgconfmm-2.6-1c2 libpulse-browse0 pavumeter \
    libglademm-2.4-1c2a pulseaudio-esound-compat libpulse0 \
    libpulse-dev pulseaudio-module-bluetooth \
    pulseaudio-module-zeroconf
 * add yourself to group `pulse'
 * /etc/asound.conf or ~/.asoundrc
    pcm.pulse {
        type pulse
    }

    ctl.pulse {
        type pulse
    }

    pcm.!default {
        type pulse
    }

Pulseaudio for multiple users, without system-mode daemon:
http://billauer.co.il/blog/2014/01/pa-multiple-users/

Generate sftp pub key from ssh pub key:
 $ ssh-keygen -e
Change passphrase of the ssh private key:
 $ ssh-keygen -p
ssh-agent + tmux:
 $ screen
 $ ssh-agent tmux  [inside screen]
Close window (do not detach tmux)
 $ tmux at
 $ ssh-add         [inside tmux]

SSH through tor/onion:
-o ProxyCommand="/bin/nc -X 5 -x localhost:9050 %h %p"
ProxyCommand /bin/nc -X 5 -x localhost:9050 %h %p
apt-get install netcat-openbsd

Dark web = onion/i2p sites.
Deep web = not indexed by search engines like Google.
https://www.ibtimes.co.uk/interpol-cryptocurrency-fight-bitcoin-crimes-dark-web-1518264

fix ssh connect lag after debug1: SSH2_MSG_SERVICE_ACCEPT received
$ vi /etc/ssh/sshd_config
UseDNS no

cron + tmux + irssi:
@reboot tmux new -d irssi

Sleep until next occurrence of specific time
    difference=$(($(date -d "4:00" +%s) - $(date +%s)))
    if [ $difference -lt 0 ]; then
        sleep $((86400 + difference))
    else
        sleep $difference
    fi
http://unix.stackexchange.com/a/94548

nvidia installer debian:
http://gosha.me/node/126
 * apt-get install build-essential libc6-dev linux-headers-$(uname -r)
 * stop X
 * CC=gcc-4.3 ./nvidia-installer.bin

Hide user from login screen:
 * /etc/gdm3/daemon.conf
 [greeter]
 Exclude=nobody,admin,reception

Disable user list in gnome gdm greeter:
/etc/gdm3/greeter.gsettings
uncomment disable-user-list=true

Set default session manager in GDM3 (Gnome)
# update-alternatives --config x-session-manager

nrg <-> iso:
http://www.opennet.ru/tips/info/1819.shtml
 * nrg to iso:
    $ dd bs=1k if=image.nrg of=image.iso skip=300
 * iso to nrg:
    $ dd if=/dev/zero of=image.nrg bs=1k count=300
    $ cat image.iso >> image.nrg
 * burn nrg to CD:
    $ dd if=image.nrg of=image.iso bs=1k skip=300 | cdrecord speed=2 -
 * mount nrg:
    $ mount image.nrg /path -o offset=$((1024*300))
        or
    $ fuseiso -p image.nrg mnt_dir

Static, Shared Dynamic and Loadable Linux Libraries:
http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html

If you want to link libapplejuice statically, but not liborangejuice:
gcc *.o -Wl,-Bstatic -lapplejuice -Wl,-Bdynamic -lorangejuice -o binary

How to see which flags -march=native will activate:
$ gcc -march=native -Q --help=target
http://stackoverflow.com/a/5470379

http://www.gnupg.org/gph/en/manual.html
 * gpg --gen-key
 * gpg --fingerprint
   Output:   pub   4096R/<HERE_IS_KEY_SPECIFIER> 2011-11-10 ...
 * --armor = generate ascii-wrapped files
 * gpg --output output_private_file --gen-revoke key-specifier
   If the --output option is omitted, the result will be placed on stdout
   key-specifier: email or string from output of gpg --fingerprint
 * Exporting a public key:
   gpg --output alice.gpg --armor --export
 * gpg --import alice.gpg
 * Sign:
  * --detach-sig file (sign only) (--verify to verify)
  * --clearsign file (readable file with sign) (--decrypt to verify and decrypt)
  * --sign file (unreadable file with sign) (--decrypt to verify and decrypt)
 * gpg --recv-key 0xBB7576AC
 * gpg --send-key blake@cyb.org
 * to export your secret keys, use:
    gpg --export-secret-key -a > secret.key
   and to import them again:
    gpg --import secret.key
GPG cheatsheet http://irtfweb.ifa.hawaii.edu/~lockhart/gpg/gpg-cs.html
GPG encrypt and sign:
$ gpg --armor --encrypt --sign -r alice@alice.com file.txt

create debian packages:
 * https://wiki.ubuntu.com/PackagingGuide/Complete
 * http://wiki.debian.org/HowToPackageForDebian
 * http://habrahabr.ru/blogs/linux/78094/
 * http://habrahabr.ru/blogs/linux/78086/
 * http://habrahabr.ru/blogs/ubuntu/72633/
 $ ispell -d american -g debian/control
 $ aspell -d en -D -c debian/control

cheat system time inside virtualbox:
 * Host:
    $ vboxmanage setextradata <vmname> "VBoxInternal/Devices/VMMDev/0/Config/GetHostTimeDisabled" "1"
 * Guest:
    # date MMDDhhmm

Timestamp <-> (year, month, day)
http://git.musl-libc.org/cgit/musl/tree/src/time/__secs_to_tm.c?h=v0.9.15
http://ptspts.blogspot.de/2009/11/how-to-convert-unix-timestamp-to-civil.html
http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15

Convert Unix Timestamp to a Date:
$ date -d@1330246800

Print Timestamp:
$ date +%s

Change timezone:
$ sudo dpkg-reconfigure tzdata
$ sudo service rsyslog restart

Run some command in russian:
$ LANG=ru_RU.utf8 date -d@1330246800

reverse engineering:
 * EDB: http://www.codef00.com/projects#edisassm
 * debuggers: http://forum.antichat.ru/thread44833.html
 * nm: list symbols from object files
 * objdump:
  * -D    decompile
  * -s    show ascii too (helpful when looking for string address)
  * List called functions addresses:
    objdump -D 1.exe | grep '\<call'|awk '{print $8}' |grep 0x|sort|uniq
 * bbe
 * addr2line - address to function name

Display the symbols you can link against:
$ nm --dynamic
    $ nm libgtest.so | grep -c ' t '
    574
    $ nm --dynamic libgtest.so | grep -c ' t '
    0
$ readelf --dyn-syms
http://stackoverflow.com/a/22401616

keylogger:
http://code.google.com/p/logkeys/wiki/Documentation#Usage_how-to
 * install logkeys
 * As root, for each existing device eventX in /dev/input/, where X is a number:
  # cat /dev/input/eventX
  then type some arbitrary characters.
  If you see any output, that is the device to be used.
  If you don't see any output, press Ctrl+C and continue with the next device.
 * edit /etc/default/logkeys:
   ENABLED=1
   DEVICE=/dev/input/eventX

X-Server is too trusting.
Rootless keylogger:
$ xinput list
$ xinput test id
http://theinvisiblethings.blogspot.com.ar/2011/04/linux-security-circus-on-gui-isolation.httheml

network audio system + mplayer + ssh:   sound
 * install packages "nas", "oss-compat" on all machines
 * ssh-forward port 8008 of "master" machine to 8000 of "audio" machine
 * on "master" machine:
   $ AUDIOSERVER=tcp/127.0.0.1:8008 mplayer -ao nas 123.avi

Turn display off/on:
 # sudo vbetool dpms off
 # sudo vbetool dpms on

Lock and unlock screen (gnome):
 $ gnome-screensaver-command -l
 $ gnome-screensaver-command -d

Linux live usb - rescue mode:
Add option "rescue/enable=true"

Setting up Windows XP to map files with an ssh tunnel:
http://www.damtp.cam.ac.uk/user/jp107/xp-remote/ssh-map/

To delete trailing whitespace from end of each line, enter:
$ cat input.txt | sed 's/[ \t]*$//' > output.txt
http://www.cyberciti.biz/tips/delete-leading-spaces-from-front-of-each-word.html

The sed one-liners: http://sed.sourceforge.net/sed1line.txt

sed: replace \n with smth
http://backreference.org/2009/12/23/how-to-match-newlines-in-sed/
    sed ':begin;$!N;s/FOO\nBAR/FOOBAR/;tbegin;P;D'
http://stackoverflow.com/a/1252191
sed ':a;N;$!ba;s/\n/ /g'
This will read the whole file in a loop, then replaces the newline(s) with a space.
  * create a register via :a
  * append the current and next line to the register via N
  * if we are before the last line, branch to the created register $!ba
    (`$! means not to do it on the last line
    (as there should be one final newline)).
  * finally the substitution replaces every newline with a space on
    the pattern space (which is the contents of the a register = the whole file.

How to use sed to delete all lines before the first match of a pattern?
$ sed '/sweet/,$!d' -i file
$ sed -r -n -e '/PATTERN/,${p}' -i file
The flag -n means that lines that do not match are discarded;

unoconv: converter between OpenOffice.org document formats

Get aspell word list dictionary:
$ aspell -l ru dump master

distcc: a fast, free distributed C/C++ compiler
DISTCC_HOSTS='localhost @f3sa.local @netbook.local' make 'CXX=distcc' -j 9 build

sudo alsa force-reload

Sun java:
see /usr/share/doc/sun-java6-bin/README.alternatives
$ update-java-alternatives --set java-6-sun

watch: re-run a command each %f seconds

sshfs -o transform_symlinks

Daemon is inhibited: sudo killall udisks; sudo killall udisks-daemon

Get rid of default google search engine:
Chrome > Options > Default search Manage > Add.
https://ssl.scroogle.org/cgi-bin/nbbwssl.cgi?Gw=%s

Wake On Lan:
 * activate in BIOS
 * on current machine:
   # ethtool -s eth0 wol g
   then shutdown
 * from other machine:
   $ wakeonlan <mac-address>

init scripts in debian:
 * /etc/init.d/myd
   http://www.debian-administration.org/articles/28
 # chmod chmod 755 /etc/init.d/myd
 * In Debian releases prior to 6.0, a service could be added with update-rc.d:
   # update-rc.d myd defaults
 * Starting with Debian 6.0, the insserv command is used instead,
   if dependency-based booting is enabled:
   # insserv myd
 * prevent service from autorun:
   # update-rc.d myd disable

Redo service installation: # insserv -r myd

Public SSH key of a GitHub user:
https://github.com/torvalds.keys

Git.io: GitHub URL Shortener
https://github.com/blog/985-git-io-github-url-shortener
$ curl -i http://git.io -F "url=https://github.com/..."
HTTP/1.1 201 Created
Location: http://git.io/abc123

Sync BitBucket and GitHub
bitbucket2github

Make git master HEAD point to current HEAD of branch:
$ git update-ref refs/heads/master HEAD

Git, show commit date in `git log`:
$ git log --pretty=fuller

Git, move commits from detached "no branch" to master branch:
http://stackoverflow.com/a/8953246
$ git branch temp
$ git checkout master # or any other branch
$ git merge temp
$ git branch -d temp

Unstage a file in git (mistaken "git add"):
$ git reset HEAD file.cpp

Git grep (search) in history:
$ git log -G pattern

Github, How to Rebase a Pull Request:
https://github.com/edx/edx-platform/wiki/How-to-Rebase-a-Pull-Request

GIT: how to change commit date and time:
$ export GIT_AUTHOR_DATE='Sat Jun 27 22:56:03 MSK 2015'
$ export GIT_COMMITTER_DATE='Sat Jun 27 22:56:03 MSK 2015'
$ git commit --amend --reset-author

git commit --interactive
http://git-scm.com/book/en/Git-Tools-Interactive-Staging

colored git:
$ git config --global color.ui auto

bash range:
for i in `seq 1 $last`; do echo $i; done

wc no filename:
wc < filename

pymol scene: http://www.virology.wisc.edu/acp/Tutorials/PyMol-animations.pdf

sound test, some sound, see sox(1)
play -n -c1 synth sin %-12 sin %-9 sin %-5 sin %-2 fade h 0.1 1 0.1

latex2html -html_version 4.0,unicode 1.tex

http://sourceforge.net/mailarchive/forum.php?
thread_name=CAKcBokumm95_xHnTrJ_qFA_HJ_dURGZyS2KUmmjbnUeKVzXtdw%40mail.gmail.com
&forum_name=witty-interest:
    The proper way to do this on Unix platforms is to install the release
    library to /usr/lib and the debug symbols to /usr/lib/debug/usr/lib.
    When you debug the library, gdb will load the debug symbols and
    combine them with the release library. You to do this, you must use
    CMAKE_BUILD_TYPE=RelWithDebInfo and then strip. That's exactly what
    the Debian (and Ubuntu) packaes do.

/usr/share/sounds/

Debian forward all IP traffic through SOCKS proxy:
    http://linuxaria.com/article/redirect-all-tcp-traffic-through-transparent-socks5-proxy-in-linux?lang=en

sg - execute command as different group ID

haproxy agains DoS: http://haproxy.1wt.eu/download/1.3/examples/antidos.cfg

redirect TCP connection (userspace):
rinetd

extract the files from rar archive, non-ASCII folder name or filename on linux:
# apt-get remove unrar-free
# apt-get install unrar
$ unrar e file.rar

solid archive with best compression level
$ rar -m5 -s a.rar file1.c file2.c
$ 7z -ms=on -mx=9 a a.7z file1.c file2.c

How to strip JPEG metadata:
convert -strip
exiftool -all= *.jpg
mediainfo - best reader of metainfo (debian 7+)
extract - another reader of metainfo
ffmpeg -i in.mp4 -acodec copy -vcodec copy out.mp4    (removes most of metadata)

convert -auto-orient
convert -contrast-stretch '5x20%'

How to produce PNG file without offset information when cropping:
$ convert in.png -crop wxh+x+y +repage out.png

tar --numeric-owner
mat
test: tar -tvf 1.tar.gz
Extract embedded thumbnail from jpeg:
$ exiftool -b -ThumbnailImage Cateyes.jpg > Cateyes.thumb.jpg
http://www.aldeid.com/wiki/Exiftool#Embedded_thumbnail_in_jpeg

inline diff:
$ wdiff -t 1.txt 2.txt

ffmpeg
    -ss start
    -t duration

Grab the X11 display with ffmpeg via
    ffmpeg -f x11grab -s cif -r 25 -i :0.0 /tmp/out.mpg
0.0 is display.screen number of your X11 server, same as the DISPLAY environment variable.
    ffmpeg -f x11grab -s cif -r 25 -i :0.0+10,20 /tmp/out.mpg
0.0 is display.screen number of your X11 server, same as the
DISPLAY environment variable. 10 is the x-offset and 20 the y-offset
for the grabbing.

Grab one window with recordmydesktop:
$ recordmydesktop --no-sound --windowid 0xa000001

Get window ID:
$ xwininfo -display :0

Record capture sound from audio card:
    audacity -> mixer toolbar (right top part of screen)

Record webcam with ffmpeg:
    ffmpeg -f video4linux2 -r 25 -s 640x480 -i /dev/video0 out.avi
    http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20capture%20a%20webcam%20input

Record video from webcam and audio from mic:
    ffmpeg -f video4linux2 -r 25 -s 640x480 -i /dev/video0 \
        -f alsa -ac 2 -i hw:0,0 -acodec flac out.avi

Crop video (ffmpeg):
avconv -i in.mp4 -filter:v "crop=width:height:x:y" out.mp4

ip0f:
    sudo p0f -i eth0 -d -u p0f-user -o /var/log/p0f.log

mix several audio files:
    sox --combine mix in1.wav in2.wav in3.wav out.wav

wav to mp3:
    lame -h -b 192 in.wav out.mp3

Connect to VPN server:
http://www.vpngate.net/
sudo openvpn --config xxxx.ovpn

wget -N -t 14 -nd http://downloads.sourceforge.net/scarangel/ipfilter.rar

Windows change MTU: http://www.dslreports.com/drtcp
Windows print to PDF: http://www.pdf995.com/download.html

online co-draw:
http://cosketch.com
http://flockdraw.com DOWN

CUPS always opening UDP port 631 on all interfaces:
/etc/cups/cupsd.conf
Change 'Browsing On' to 'Browsing Off' and restart
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=644144

Allow non-root processes bind to "privileged" ports (<1024):
# apt-get install libcap2-bin
# setcap 'cap_net_bind_service=+ep' /path/to/prog

Force reboot in Linux:
alt + PrtSc + reisub

how to clear cache in linux:
$ sudo blockdev --flushbufs /dev/sdXY
    (one device)
$ sync ; sudo sh -c 'echo 3 > /proc/sys/vm/drop_caches'
    (all caches)
drop disk cache:
# echo 3 > /proc/sys/vm/drop_caches
Also try this:
# umount /

electrum change gap limit
>>> wallet.storage.put('gap_limit',100)

Linux: get username by id
$ getent passwd 1000

ifenslave - Attach and detach slave network devices to a bonding device
The following example shows how to setup a bonding device and enslave
two real Ethernet devices to it

How To Set Up A Tor Middlebox Routing All VirtualBox Virtual Machine Traffic Over The Tor Network
http://www.howtoforge.com/how-to-set-up-a-tor-middlebox-routing-all-virtualbox-virtual-machine-traffic-over-the-tor-network

pulseaudio for multiple users on Debian:
$ pulseaudio --kill
# pulseaudio --system -D
http://ubuntuforums.org/showthread.php?t=1417647&p=8917505#post8917505

cclive ~ youtube-dl

dieharder - random number test

arm config:
$ tor --hash-password 'password'
copy and paste result to /etc/tor/torrc
edit ~/.arm/armrc:
    startup.controlPassword password
    features.graph.bw.transferInBytes true

anti-ddos:
http://habrahabr.ru/post/236771/
tail -f /var/log/nginx/nginx.access.log | cut -d ' ' -f 1 | logtop
grep "&key=" /var/log/nginx/nginx.access.log | cut -d ' ' -f 1 | sort | uniq -c | sort -n | tail -n 30
Cколько коннектов на 80 порт: netstat -na | grep ":80\ " | wc -l
На какой домен чаще всего идут запросы: tcpdump -npi eth0 port domain
С какого ip сколько запросов netstat -ntu | awk '{print $5}'| cut -d: -f1 | sort | uniq -c | sort -nr | more
Нагрузка на канал ftop -i eth0 -B

checkinstall / mkdir: cannot create directory
    checkinstall --fstrans=no

docker GUI:
http://www.jann.cc/2014/09/06/sandboxing_proprietary_applications_with_docker.html

install python-flup
install uwsgi-plugin-python
uwsgi, django: /etc/uwsgi/apps-available/site.ini
    [uwsgi]
    uid = user
    gid = user
    socket = /tmp/site.sock
    plugins = http, python
    chdir = /path/to/site/dir
    wsgi-file = project/wsgi.py
    chmod-socket = 666
django, nginx:
    upstream site {
        server unix:///tmp/site.sock;
    }
    server {
        location /static/admin/ {
            alias /usr/lib/python2.7/dist-packages/django/contrib/admin/static/admin/;
            expires 7d;
        }
        location /static/ {
            alias /path/to/static/
            expires 7d;
        }
        location / {
            uwsgi_pass  site;
            include     uwsgi_params;
        }
    }

Domain info:
$ dig -t srv xxx.xx

Multiple Tor server instances:
https://www.torservers.net/wiki/setup/server#multiple_tor_processes

Fake personal data generator:
https://github.com/joke2k/Faker
# pip install fake-factory
$ PYTHONIOENCODING=UTF-8 faker -l 'ru_RU' | less

Decrypt using openssl from command line:
$ openssl enc -aes-128-ctr -d -in input -out output -K key -iv iv
    input   -- name of input file. The file must not contain IV
    output  -- output file
    key     -- key (hex)
    IV      -- IV (hex)

Use backup tool duplicity with custom port and identity file:
$ cat .ssh/config
Host backup-host
User user
HostName 1.2.3.4
IdentityFile ~/.ssh/identity-file
Port 12345
$ duplicity --rsync-options "--rsh='ssh -oBatchMode=yes'" \
    source rsync://backup-host//path/to/backup

Avoiding tests when building Debian packages:
$ DEB_BUILD_OPTIONS=nocheck debuild
Avoiding cleaning, tests and signing when building Debian packages:
$ DEB_BUILD_OPTIONS=nocheck debuild -us -uc -nc
Build debug version of Debian package:
$ DEB_BUILD_OPTIONS='nostrip noopt debug' debuild

Debian packaging a simple already-compiled program:
https://ubuntuforums.org/showthread.php?t=910717

FigTree show tree without branch lengths:
Trees -> Select "Transform branches"

NCBI genomes in ASN format:
Download genomes here: ftp://ftp.ncbi.nlm.nih.gov/genomes
Read https://www.ncbi.nlm.nih.gov/data_specs/NCBI_data_conversion.html
Download NCBI_all.asn: http://ncbi.nlm.nih.gov/data_specs/asn/NCBI_all.asn
Download datatool: ftp://ftp.ncbi.nlm.nih.gov/toolbox/ncbi_tools++/BIN/CURRENT/datatool
Convert 1.asn to 1.json:
$ datatool -m NCBI_all.asn -v 1.asn -pj 1.json
Convert 1.asn to 1.xml:
$ datatool -m NCBI_all.asn -v 1.asn -px 1.xml
Use "-" instead of output filename to output to stdout

Getting data from Pubmed:
http://www.fredtrotter.com/2014/11/14/hacking-on-the-pubmed-api/

Find files with Windows line ends (CRLF):
$ grep -IUlr $'\r'

Run virtualbox in separate X session:
$ xinit /usr/bin/virtualbox $* -- :2

x86 assembly:
    https://www.cs.virginia.edu/~evans/cs216/guides/x86.html
x86 registers:
    https://www.cs.virginia.edu/~evans/cs216/guides/x86-registers.png
    https://upload.wikimedia.org/wikipedia/commons/1/15/Table_of_x86_Registers_svg.svg
    https://en.wikipedia.org/wiki/X86#x86_registers
x64 assembly:
    https://software.intel.com/en-us/articles/introduction-to-x64-assembly/
    http://www.cs.princeton.edu/courses/archive/spr11/cos217/lectures/15AssemblyFunctions.pdf
intrinsics:
    https://software.intel.com/sites/landingpage/IntrinsicsGuide/
Software developer manuals:
    http://www.intel.ru/content/www/ru/ru/processors/architectures-software-developer-manuals.html
Optimization manual:
    http://www.agner.org/optimize/#manuals

Multitasking:
Preemptive - system decides when to interrupt a task (OS threads)
Cooperative - task itself decides when to interrupt (green threads, coroutines)
http://www.on-time.com/rtos-32-docs/rtkernel-32/programming-manual/advanced-topics/preemptive-or-cooperative-multitasking.htm

thread confinement = making thread-local data

exponential backoff = retry in 1 sec, then in 2 sec, then in 4 sec and so on

underflow = float which is too close to 0.0 to be stored in memory
For example, if the exponent part can represent values from −127 to 127,
then a result with a value less than −127 may cause underflow.
https://en.wikipedia.org/wiki/Arithmetic_underflow

in lieu of = instead of
in favor of = в пользу

concurency:
    programming pattern
    multiple threads execute in overlapping time periods
    possible on single core processor
(true-)parallelism:
    hardware feature
    multiple threads execute simultaneously
    requires multiple cores/processors/GPU

                    concurency     (true-)parallelism

o------o                 -                 -
        o------o

o--   --  --o            +                 -
   o--  --   --o

o--------------o         +                 +
o--------------o

Problems of event multiplexing interfaces of Linux:
"open" in non-blocking mode, flag O_NONBLOCK
  - doesn't block, consumes CPU time
  - doesn't work with regular files (always ready if not EOF)
SIGIO signal, flags O_NONBLOCK | O_ASYNC
  + can be combined with poll to wait on both IO events and signals
  - doesn't work with regular files (always ready if not EOF)
select:
  - limitation of max fd
  - kernel changes the bitmap, application has to refill
  - application iterates through all fds
  - kernel iterates through all fds
  - doesn't work with regular files (always ready if not EOF)
poll:
  + uses array instead of bitmap
    + solves "limitation of max fd" problem of select
  + separate fields for input and output
    + solves "application has to refill" problem of select
  - application still has to iterates through all fds
    (because the output is a field, not a separate array)
  - kernen still terates through all fdsiterates through all fds
    (to solve this, the fd list has to be moved to kernelspace)
  - doesn't work with regular files (always ready if not EOF)
epoll:
  + moves fd list to kernelspace
  - requires a system call per each fd update (add/change/del)
  - works only with files
  - doesn't work with regular files (forbids adding a regular fd)
kqueue (FreeBSD):
  + works with regular files
  + works with non-file system events
  + can update many fds and wait for event in a single syscall
http://www.eecs.berkeley.edu/~sangjin/2012/12/21/epoll-vs-kqueue.html
http://compgeom.com/~piyush/teach/4531_06/project/hell.html

Switch to the previous directory:
$ cd -

memory regions:
 * text: code, string literals, constants
 * stack
 * bss (block started by symbol)
 * data = heap

root processes run in ring3, not in ring0
> Linux on the x86 architecture usually uses Ring0 for kernel (including
> device drivers) and Ring3 for userspace applications (regerdless of
> whether they are run by root or another ordinary or privileged user).
http://unix.stackexchange.com/a/94671

Process A can send a signal to process B,
if at least one of the following is true:
 * A has CAP_KILL
 * (A.effective_uid, A.real_uid) intersects (B.real_uid, B.saved_uid)
 * signal=SIGCONT and A.session == B.session

reprepro -- Debian package repository producer
Add packages:
reprepro includedeb wheezy *.deb
Remove packages:
reprepro removematched wheezy '*'

Reset guard node of tor: rm /var/lib/tor/state

Run host system in QEMU:
# qemu-system-x86_64 -enable-kvm -m 256 -daemonize -snapshot \
    -drive cache=none,file=/dev/sda -usbdevice tablet

Howto get root on Linux machine:
 * grub
  * if there is no menu, try Shift
 * select target Linux installation
 * press e
 * find line starting with "linux", append "init=/bin/bash"
  * replace "ro" woth "rw"
 * Ctrl-X

How to fix this problem:
/etc/default/grub
GRUB_TIMEOUT=0

Prevent nginx from trying to write to /var/log/nginx/error.log
It is not possible with command line options, as nginx opens
/var/log/nginx/error.log before applying command line arguments.
This patch can be useful for running nginx under a regular user.
$ perl -pi \
    -e 's@/var/log/nginx/@_var_log_nginx/@g;' \
    -e 's@/var/lib/nginx/@_var_lib_nginx/@g;' \
    -e 's@/var/run/nginx.pid@_var_run/nginx.pid@g;' \
    -e 's@/run/nginx.pid@_run/nginx.pid@g;' \
    < /usr/sbin/nginx > nginx
$ chmod +x nginx
$ mkdir _var_log_nginx _var_lib_nginx _var_run _run
$ ./nginx -p . -c nginx.conf
See also http://stackoverflow.com/questions/18714902/

nginx switch off logs:
access_log off;
error_log /dev/null crit;

nginx detect agent type:
# https://gist.github.com/calind/1281950
# agent type detection, based on idea from from http://notnotmobile.appspot.com/
map $http_user_agent $agent_type_phase1 {
    default 'mobile';
    '' 'unknown';
    ~*iphone|ipod|blackberry|palm|windows\s+ce 'mobile';
    ~*windows|linux|os\s+[x9]|solaris|bsd 'desktop';
    ~*spider|crawl|slurp|bot|feedburner 'bot';
}
map $http_x_skyfire_phone $agent_type_phase2 {
    default 'mobile';
    '' $agent_type_phase1;
}
map $http_x_operamini_phone_ua $agent_type {
    default 'mobile';
    '' $agent_type_phase2;
}

How to concatenate Free 90 days COMODO certificates:
$ cat kiset_org.crt COMODORSADomainValidationSecureServerCA.crt \
    COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > all.crt

Cheap SSL cert.: sslcertificate.com

Replace with custom DH parameters:
# openssl dhparam -out /etc/nginx/dhparams.pem 2048
Add to /etc/nginx/nginx.conf:
        ssl_protocols  TLSv1 TLSv1.1 TLSv1.2;  # don’t use SSLv3 ref: POODLE
        ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA';
        ssl_dhparam /etc/nginx/dhparams.pem;
        ssl_prefer_server_ciphers on;
        ssl_session_cache shared:SSL:10m;
        ssl_session_timeout 10m;

Print SSL key info:
$ openssl rsa -in file.key -text -noout

Generate a certificate signing request (CSR) for an existing private key
$ openssl req -out CSR.csr -sha256 -key privateKey.key -new

awk tabs:
$ awk -F $'\t'

Edit Google Spreadsheets from Python:
https://github.com/burnash/gspread

git clean -fdx

Log what ld does: LD_DEBUG=all
http://www.bnikolic.co.uk/blog/linux-ld-debug.html

wget resume failed download:
$ wget -c http://example.com/file.dat

core dump:
$ ulimit -c unlimited
$ crashing-program
Segmentation fault (core dumped)
$ cat /proc/sys/kernel/core_pattern
$ gdb crashing-program code.dump

Make core dump of running process:
$ gdb --pid 12345
(gdb) generate-core-file

Debian VNC server and client:
http://linuxconfig.org/quick-vnc-server-client-setup-on-debian-linux-jessie-8

    # apt-get install vnc4server

    $ vnc4passwd
    Password:
    Verify:

    $ vnc4server -geometry 800x600 -depth 24 -localhost
    New 'debian:1 (lubos)' desktop is debian:1

    Creating default startup script /home/lubos/.vnc/xstartup
    Starting applications specified in /home/lubos/.vnc/xstartup
    Log file is /home/lubos/.vnc/debian:1.log

    # apt-get install xvnc4viewer

    $ xvnc4viewer 10.1.1.12:1

    $ vnc4server -kill :1

    ~/.vnc/xstartup:
        [ -x /etc/vnc/xstartup ] && exec /etc/vnc/xstartup
        [ -r $HOME/.Xresources ] && xrdb $HOME/.Xresources
        xsetroot -solid grey
        vncconfig -iconic &
        x-terminal-emulator -geometry 80x24+10+10 -ls -title "$VNCDESKTOP Desktop" &
        x-window-manager &
        xfdesktop &

$ cat /etc/network/interfaces:
dns-nameservers 217.10.39.4 8.8.8.8

TSV to Markdown:
https://github.com/monochromegane/mdt
http://www.tablesgenerator.com/markdown_tables
https://pypi.python.org/pypi/tabulate
column -ts$'\t'

LC_ALL=C sort

Ctrl + S    console freeze
Ctrl + Q    console unfreeze
Ctrl + \    terminate with core dump


Upload Travis artifacts to GitHub:
1. Create new GitHub account
2. Invite it to the repository with write access.
3. Generate OAuth token for the new account:
   https://github.com/settings/tokens
Option a)
    4. Install `gem install travis`
       or clone https://github.com/travis-ci/travis.rb/
       and run `bin/travis` (may ask to install dependencies)
    5. Run `travis setup releases`
Option b)
    4. Add Environment Variable GH_API_KEY with token
       on Travis.
    5. Add the following lines to .travis.yml
       deploy:
         provider: releases
         api_key: "$GH_API_KEY"
6. Edit .travis.yml:
before_deploy:
  - do something needed for deploying only
deploy:
  provider: releases
  api_key:
    secure: abcdef01...
  file: "$(ls foo_*.tar.gz 2>/dev/null || echo README.md)"
  skip_cleanup: true
  on:
    tags: true
7*. How to not to hardcode "secure" string:
http://stackoverflow.com/q/25916249/1293417
8*. Multiple files (and various number of files):
    file:
      - "$(ls foo_*.tar.gz 2>/dev/null || echo README.md)"
      - "$(ls bar_*.tar.gz 2>/dev/null || echo README.md)"

Add search.disconnect.me to normal Firefox:
https://addons.mozilla.org/en-us/firefox/addon/disconnectsearch/

Windows batch file to build Lua from source:
https://github.com/Tieske/luawinmake

Q-digest:
https://github.com/dhruvbird/q-digest

Longest biased interval = longest non-negative sub array
http://stackoverflow.com/a/21714488

mkdir can be used as a mutex:
http://wiki.bash-hackers.org/howto/mutex

luajit: enable profiling
    -jp=v
    see doc/ext_profiler.html

Build Lua module. Gather all dependencies of Lua module together
https://github.com/starius/single-dir.lua

Description of Lua 5.2 bytecode opcodes:
http://files.catwell.info/misc/mirror/lua-5.2-bytecode-vm-dirk-laurie/lua52vm.html

Add Line Numbers:
$ cat -n foo.txt
$ nl foo.txt

bash conditions example:
$ foo="foo*"
$ [[ "foobar" == foo* ]] && echo yes || echo no
yes
$ [[ "foobar" == "foo*" ]] && echo yes || echo no
no
$ [[ "foobar" == $foo ]] && echo yes || echo no
yes
$ [[ "foobar" == "$foo" ]] && echo yes || echo no
no

http://www.getlaura.com/testing-unit-vs-integration-vs-regression-vs-acceptance/
Testing: Unit vs Integration vs Regression vs Acceptance
 1) Unit - You test each individual piece of code.
     Think each class or method.
 2) Integration - You test the integrations of many units together.
     You make sure your code works when put together, including
     dependencies, databases and libraries.
 3) Regression - After integrating (and maybe fixing) you should run your
     unit tests again. This is regression testing to ensure that further
     changes have not broken any units that were already tested. You can
     run your unit tests again and again for regression testing.
 3) Acceptance - You should test that the program works the way
     a user/customer expects the application to work. Acceptance tests
     ensure that the functionality meets business requirements.

Index of Lua C-API functions by category/tag:
http://oberon00.github.io/lua-cfuncidx/

utilization of hard drive:
$ iostat -x 1

utilization of CPU, swap and memory:
$ vmstat 1
    bi: Blocks received from a block device (blocks/s).
    bo: Blocks sent to a block device (blocks/s).
    in: The number of interrupts per second, including the clock.
    cs: The number of context switches per second.
    st: Time stolen from a virtual machine.
$ vmstat --slabs 1

find files opened by the process:
$ lsof -p <PID>

Performance counter stats (branch misses etc) for process:
$ perf stat -p <PID>

Find hot functions in the program:
$ perf top -p <PID>

Trace utilization of hard drive by processeses and processors:
# btrace /dev/sda

Show all open sockets: netstat, ss.

Show memory mapping of the process (show mmap'ed memory).
$ pmap -x <PID>

Stats about memory pages:
$ cat /proc/meminfo

Log memory usage by a process:
$ pidstat -r -C tool-name 1

http://stackoverflow.com/a/6005003
System zeroes memory before giving it to user processes:

    On any modern operating system, the only way newly obtained
    memory will contain nonzero values is if memory previously
    freed by your program got reused by malloc. When new memory
    is obtained from the operating system (kernel), it is
    initially purely virtual. It has no physical existence;
    instead it is mapped as copy-on-write mappings of a single
    shared memory page that's full of 0 bytes. The first time
    you attempt to write to it, the kernel will trap the write,
    allocate a new page of physical memory, copy the contents
    of the original page (which in this case are all 0 bytes)
    to the new page, and then resume your program. If the
    kernel knows the newly allocated physical memory is already
    zero-filled, it might even be able to optimize out the copy
    step.

    This procedure is both necessary and efficient. It's
    necessary because handing over memory that might contain
    private data from the kernel or another user's processes to
    your process would be a critical security breach. It's
    efficient because no zeroing is performed at allocation
    time; the "zero-filled" pages are just reference to a
    shared zero page.

calloc(nelements, sizeof(element)) - clear alloc, zerros all bytes
alloca - allocate memory that is automatically freed

About random permutations:
http://www.cs.berkeley.edu/~jfc/cs174/lecs/lec2/lec2.pdf

Complexity of make_heap is linear:
http://stackoverflow.com/a/9755805
http://www.cs.umd.edu/~meesh/351/mount/lectures/lect14-heapsort-analysis-part.pdf

Linux I/O Schedulers:
https://www.safaribooksonline.com/library/view/linux-system-programming/0596009585/ch04s06.html

Tree of nginx processes:
$ ps -ef --forest | grep nginx
    -e     Select all processes.  Identical to -A.
    -f     Do full-format listing.

wrk: Modern HTTP benchmarking tool
https://github.com/wg/wrk

Select N random lines from file:
$ shuf -n N input > output

Google Ngram:
https://books.google.com/ngrams/graph?content=Linux%2CWindows&year_start=1800&year_end=2000

Approximate Nearest Neighbors: https://github.com/spotify/annoy/

Page faults:
  * minor: the page is in memory, but not marked in MMU as being in memory
  * major: the page is in swap
  * invalid: the address is not part of the virtual address space

gcov: disable timestamp check
  for i in *.gcno; do
    dd if=$i bs=1 skip=8 count=4 of=$(echo $i | sed 's/gcno$/gcda/') seek=8
  done
  # See https://coveralls.io/builds/6378481
  # See https://github.com/starius/luahs/commit/79351b6d5a14f4ebb1185

If you want lines X to Y inclusive (starting the numbering at 1), use
$ tail -n +$X /path/to/file | head -n $((Y-X+1))
http://unix.stackexchange.com/a/47424
